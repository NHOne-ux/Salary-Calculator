<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Know Your Potential Salary</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 20px 0;
            background: linear-gradient(135deg, #e0f7fa, #f0e6f5);
        }
        .calculator-container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
            background: linear-gradient(135deg, #ffffff, #f9f9f9);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 2px solid #ff9800;
        }
        .calculator-container h1 {
            text-align: center;
            color: #1e90ff;
            margin-bottom: 20px;
            font-size: 28px;
        }
        .month-panels {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .month-panel {
            flex: 1;
            padding: 15px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        .month-panel:hover {
            transform: scale(1.02);
        }
        .month-panel h2 {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ffeb3b, #ff9800);
            -webkit-background-clip: text;
            color: transparent;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #34495e;
            font-size: 14px;
        }
        .input-group input[type="text"] {
            width: 100%;
            padding: 8px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: #f8f8f8;
            transition: border-color 0.3s;
        }
        .input-group input[type="text"]:focus {
            border-color: #ff9800;
            outline: none;
        }
        .result {
            margin-top: 10px;
            padding: 8px;
            border-radius: 5px;
            font-weight: bold;
        }
        .result.green {
            color: #27ae60;
            background-color: #e8f5e9;
        }
        .result.red {
            color: #e74c3c;
            background-color: #fdecea;
        }
        .surge-bonus {
            margin-top: 20px;
            text-align: center;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
        .disclaimer {
            font-size: 10px;
            text-align: center;
            color: #7f8c8d;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>Know Your Potential Salary</h1>
        <div class="month-panels">
            <div class="month-panel">
                <h2>M1</h2>
                <div class="input-group">
                    <label for="m1Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m1Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m1Target">Target (₹):</label>
                    <input type="text" id="m1Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m1Achievement">Achievement (₹):</label>
                    <input type="text" id="m1Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m1SparkResult"></div>
            </div>
            <div class="month-panel">
                <h2>M2</h2>
                <div class="input-group">
                    <label for="m2Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m2Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m2Target">Target (₹):</label>
                    <input type="text" id="m2Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m2Achievement">Achievement (₹):</label>
                    <input type="text" id="m2Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m2SparkResult"></div>
            </div>
            <div class="month-panel">
                <h2>M3</h2>
                <div class="input-group">
                    <label for="m3Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m3Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m3Target">Target (₹):</label>
                    <input type="text" id="m3Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m3Achievement">Achievement (₹):</label>
                    <input type="text" id="m3Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m3SparkResult"></div>
                <div class="surge-bonus" id="surgeBonus"></div>
            </div>
            <div class="month-panel">
                <h2>M4</h2>
                <div class="input-group">
                    <label for="m4Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m4Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m4Target">Target (₹):</label>
                    <input type="text" id="m4Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m4Achievement">Achievement (₹):</label>
                    <input type="text" id="m4Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m4SparkResult"></div>
                <div class="result" id="m4GrossResult" style="display: none;"></div>
            </div>
        </div>
        <div class="disclaimer">* For representation purpose only, actual payout may slightly vary.</div>
    </div>

    <script>
        function formatSalary(input) {
            let value = input.value.replace(/[^0-9]/g, '');
            let num = parseInt(value);
            input.value = num ? num.toLocaleString('en-IN') : '';
            updateAll();
        }

        function calculateSpark(salaryId, targetId, achievementId, resultId) {
            let salary = parseInt(document.getElementById(salaryId).value.replace(/,/g, '')) || 0;
            let target = parseInt(document.getElementById(targetId).value.replace(/,/g, '')) || 0;
            let achievement = parseInt(document.getElementById(achievementId).value.replace(/,/g, '')) || 0;
            let sparkAmount = 0;

            if (target > 0 && achievement > 0) {
                let ratio = (achievement / target) * 100;

                if (ratio < 60) {
                    sparkAmount = 0;
                } else {
                    let base = target * 0.6;
                    let excess = achievement - base;
                    let slabs = [
                        { max: 0.7 * target - base, rate: 0.03 },
                        { max: 0.8 * target - base, rate: 0.04 },
                        { max: 0.9 * target - base, rate: 0.05 },
                        { max: target - base, rate: 0.06 },
                        { max: 1.1 * target - base, rate: 0.12 },
                        { max: 1.2 * target - base, rate: 0.15 },
                        { max: 1.3 * target - base, rate: 0.20 },
                        { max: Infinity, rate: 0.25 }
                    ];

                    let slabValues = [10000, 10000, 10000, 10000, 10000, 10000, 10000, excess - (7 * 10000)];
                    let remaining = excess;
                    let index = 0;
                    for (let slab of slabs) {
                        if (remaining > 0) {
                            let slabAmount = Math.min(remaining, slabValues[index] || Infinity);
                            sparkAmount += slabAmount * slab.rate;
                            remaining -= slabAmount;
                            index++;
                        }
                    }
                }
            }
            document.getElementById(resultId).className = 'result green';
            document.getElementById(resultId).innerText = `Spark Variable Amount: ₹${sparkAmount.toLocaleString('en-IN')}`;
            return sparkAmount;
        }

        function updateAll() {
            let m1Spark = calculateSpark('m1Salary', 'm1Target', 'm1Achievement', 'm1SparkResult');
            let m2Spark = calculateSpark('m2Salary', 'm2Target', 'm2Achievement', 'm2SparkResult');
            let m3Spark = calculateSpark('m3Salary', 'm3Target', 'm3Achievement', 'm3SparkResult');
            let m4Spark = calculateSpark('m4Salary', 'm4Target', 'm4Achievement', 'm4SparkResult');

            let m1Target = parseInt(document.getElementById('m1Target').value.replace(/,/g, '')) || 0;
            let m1Ach = parseInt(document.getElementById('m1Achievement').value.replace(/,/g, '')) || 0;
            let m2Target = parseInt(document.getElementById('m2Target').value.replace(/,/g, '')) || 0;
            let m2Ach = parseInt(document.getElementById('m2Achievement').value.replace(/,/g, '')) || 0;
            let m3Target = parseInt(document.getElementById('m3Target').value.replace(/,/g, '')) || 0;
            let m3Ach = parseInt(document.getElementById('m3Achievement').value.replace(/,/g, '')) || 0;
            let cumulativeAchPercent = (m1Target > 0 ? (m1Ach / m1Target) * 100 : 0) + 
                                     (m2Target > 0 ? (m2Ach / m2Target) * 100 : 0) + 
                                     (m3Target > 0 ? (m3Ach / m3Target) * 100 : 0);
            let m4Salary = parseInt(document.getElementById('m4Salary').value.replace(/,/g, '')) || 0;
            let surgeBonus = (cumulativeAchPercent >= 450) ? 3750 : 0;
            let m4GrossResult = document.getElementById('m4GrossResult');
            let surgeBonusDiv = document.getElementById('surgeBonus');

            if (surgeBonus > 0) {
                surgeBonusDiv.className = 'surge-bonus green';
                surgeBonusDiv.style.display = 'block';
                surgeBonusDiv.innerText = `Congratulations! You have unlocked a monthly Surge Bonus of Rs 3,750.`;
            } else {
                surgeBonusDiv.style.display = 'none';
            }

            let totalM4 = m4Salary + m4Spark + surgeBonus;
            if (m4Salary > 0 && document.getElementById('m4Target').value && document.getElementById('m4Achievement').value) {
                m4GrossResult.className = 'result green';
                m4GrossResult.style.display = 'block';
                m4GrossResult.innerText = `Your Potential Gross Salary for M4 is ₹${totalM4.toLocaleString('en-IN')}`;
            } else {
                m4GrossResult.style.display = 'none';
            }
        }
    </script>
</body>
</html>
