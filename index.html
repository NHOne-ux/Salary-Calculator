<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GWP Calculator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 20px 0;
            background: linear-gradient(135deg, #e0f7fa, #f0e6f5);
        }
        .calculator-container {
            width: 90%;
            max-width: 800px;
            padding: 20px;
            background: linear-gradient(135deg, #ffffff, #f9f9f9);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 2px solid #ff9800;
        }
        .calculator-container h1 {
            text-align: center;
            color: #1e90ff;
            margin-bottom: 20px;
            font-size: 28px;
        }
        .month-panels {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .month-panel {
            flex: 1;
            padding: 15px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        .month-panel:hover {
            transform: scale(1.02);
        }
        .month-panel h2 {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ffeb3b, #ff9800);
            -webkit-background-clip: text;
            color: transparent;
        }
        .input-group {
            margin: 10px 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #34495e;
            font-size: 14px;
        }
        .input-group input[type="text"] {
            width: 100%;
            padding: 8px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            background-color: #f8f8f8;
            transition: border-color 0.3s;
        }
        .input-group input[type="text"]:focus {
            border-color: #ff9800;
            outline: none;
        }
        .result {
            margin-top: 10px;
            padding: 8px;
            border-radius: 5px;
            font-weight: bold;
        }
        .result.green {
            color: #27ae60;
            background-color: #e8f5e9;
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>GWP Calculator</h1>
        <div class="month-panels">
            <div class="month-panel">
                <h2>M1</h2>
                <div class="input-group">
                    <label for="m1Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m1Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m1Target">Target (₹):</label>
                    <input type="text" id="m1Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m1Achievement">Achievement (₹):</label>
                    <input type="text" id="m1Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m1GWPResult"></div>
            </div>
            <div class="month-panel">
                <h2>M2</h2>
                <div class="input-group">
                    <label for="m2Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m2Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m2Target">Target (₹):</label>
                    <input type="text" id="m2Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m2Achievement">Achievement (₹):</label>
                    <input type="text" id="m2Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m2GWPResult"></div>
            </div>
            <div class="month-panel">
                <h2>M3</h2>
                <div class="input-group">
                    <label for="m3Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m3Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m3Target">Target (₹):</label>
                    <input type="text" id="m3Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m3Achievement">Achievement (₹):</label>
                    <input type="text" id="m3Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m3GWPResult"></div>
            </div>
            <div class="month-panel">
                <h2>M4</h2>
                <div class="input-group">
                    <label for="m4Salary">Monthly Salary Offered (₹):</label>
                    <input type="text" id="m4Salary" oninput="formatSalary(this)" placeholder="Enter amount">
                </div>
                <div class="input-group">
                    <label for="m4Target">Target (₹):</label>
                    <input type="text" id="m4Target" oninput="formatSalary(this)" placeholder="Enter target">
                </div>
                <div class="input-group">
                    <label for="m4Achievement">Achievement (₹):</label>
                    <input type="text" id="m4Achievement" oninput="formatSalary(this); updateAll()" placeholder="Enter achievement">
                </div>
                <div class="result" id="m4GWPResult"></div>
            </div>
        </div>
        <div class="disclaimer">* For representation purpose only, actual payout may slightly vary.</div>
    </div>

    <script>
        function formatSalary(input) {
            let value = input.value.replace(/[^0-9]/g, '');
            let num = parseInt(value);
            input.value = num ? num.toLocaleString('en-IN') : '';
            updateAll();
        }

        function calculateGWP(target, achievement) {
            let gwp = 0;

            if (target > 0 && achievement > 0) {
                let ratio = (achievement / target) * 100;

                if (ratio < 60) {
                    gwp = 0;
                } else {
                    // Calculate incremental GWP slabs based on 10% of target
                    let baseThreshold = target * 0.60; // 60% of target
                    let increment = target * 0.10;     // 10% of target per slab

                    let slabs = [
                        { min: 60, max: 69.9, rate: 0.03 },
                        { min: 70, max: 79.9, rate: 0.04 },
                        { min: 80, max: 89.9, rate: 0.05 },
                        { min: 90, max: 99.9, rate: 0.06 },
                        { min: 100, max: 109.9, rate: 0.12 },
                        { min: 110, max: 119.9, rate: 0.15 },
                        { min: 120, max: 129.9, rate: 0.20 },
                        { min: 130, max: Infinity, rate: 0.25 }
                    ];

                    let currentThreshold = baseThreshold;
                    for (let slab of slabs) {
                        if (ratio >= slab.min) {
                            let incrementalGWP = Math.min(achievement, currentThreshold + increment) - currentThreshold;
                            if (incrementalGWP > 0) {
                                gwp += incrementalGWP * slab.rate;
                            }
                            currentThreshold += increment;
                        } else {
                            break;
                        }
                    }
                }
            }

            return gwp;
        }

        function updateAll() {
            let m1Target = parseInt(document.getElementById('m1Target').value.replace(/,/g, '')) || 0;
            let m1Ach = parseInt(document.getElementById('m1Achievement').value.replace(/,/g, '')) || 0;
            let m2Target = parseInt(document.getElementById('m2Target').value.replace(/,/g, '')) || 0;
            let m2Ach = parseInt(document.getElementById('m2Achievement').value.replace(/,/g, '')) || 0;
            let m3Target = parseInt(document.getElementById('m3Target').value.replace(/,/g, '')) || 0;
            let m3Ach = parseInt(document.getElementById('m3Achievement').value.replace(/,/g, '')) || 0;
            let m4Target = parseInt(document.getElementById('m4Target').value.replace(/,/g, '')) || 0;
            let m4Ach = parseInt(document.getElementById('m4Achievement').value.replace(/,/g, '')) || 0;

            let m1GWP = calculateGWP(m1Target, m1Ach);
            let m2GWP = calculateGWP(m2Target, m2Ach);
            let m3GWP = calculateGWP(m3Target, m3Ach);
            let m4GWP = calculateGWP(m4Target, m4Ach);

            document.getElementById('m1GWPResult').className = 'result green';
            document.getElementById('m1GWPResult').innerText = `Your Potential Spark variable for the month: ₹${m1GWP.toLocaleString('en-IN')}`;
            document.getElementById('m2GWPResult').className = 'result green';
            document.getElementById('m2GWPResult').innerText = `Your Potential Spark variable for the month: ₹${m2GWP.toLocaleString('en-IN')}`;
            document.getElementById('m3GWPResult').className = 'result green';
            document.getElementById('m3GWPResult').innerText = `Your Potential Spark variable for the month: ₹${m3GWP.toLocaleString('en-IN')}`;
            document.getElementById('m4GWPResult').className = 'result green';
            document.getElementById('m4GWPResult').innerText = `Your Potential Spark variable for the month: ₹${m4GWP.toLocaleString('en-IN')}`;
        }
    </script>
</body>
</html>
